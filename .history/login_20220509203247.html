<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="SHORTCUT ICON" href="./public/img//left_bar_img/websiteLogo.png">
	<link rel="stylesheet/less" href="./public/less/index.less" />
	<script src="./node_modules/less/dist/less.min.js"></script>
	<script src="./node_modules/jquery/dist/jquery.min.js"></script>
    <title>慢膳外卖-只做最适合你的外卖！</title>
	
</head>
<body>
	<div class="login_regist" id="login_regist">
		<div class="container" id="container">
			<!-- <form action="/main" method="post" id="loginForm" enctype="application/x-www-form-urlencoded"> -->
			<div class="loginForm">
				<div class="form_item_head">
					<p>登录</p>
					<p><a href="register.html">注册</a></p>
				</div>
				<div class="form_item">
					<span><img src="./public/img/login_regist_img/phone_user_img.png" alt=""></span>
					<input type="number" id="phoneNum" name="phone" placeholder="请输入手机号">
				</div>
				<div class="form_item">
					<span><img src="./public/img//login_regist_img/password_lock.png" alt=""></span>
					<input type="password" id="passNum" name="password" placeholder="请输入密码">
				</div>
				<div class="form_item">
					<input type="submit" id="loginBtn" onclick="submit()" value="登录">
					<input type="reset" id="clearInput" value="重置">
				</div>
			</div>
			<!-- </form> -->
		</div>
	</div>

	<script type="text/javascript">
		
		// // 1. 方法可行，可以获取到数据
		function submit(){
			// trim()去掉字符串首尾的空格
			$.ajax({
				type:"post",
				// dataType : "json",
				// contentType : 'application/json;charset=UTF-8',
				url:"/login",
				timeout : 3000,  //请求超时时间
				data:{
					phone : $("#phoneNum").val(),
					password : $("#passNum").val()
				},
				success : function(res){
					var userPhone = data.phone
					if(res.code == 1){
						alert(res.message)
						window.location.href = "/main.html";
						location.href = "/views/user_information.html?"
					}else{
						alert(res.message)
					}
				},
				error : function(){
					console.info("网络出错。")
					alert("登陆失败，请重试。。。")
				}
			})
		}
				
		// 2.
		// function submit(){
		// 	var phone = document.getElementById("phoneNum").value
		// 	if(phone == null || phone == ""){
		// 		alert("用户名错误")
		// 		// 此方法用于强制打断action跳转
		// 		event.preventDefault()
		// 	}else{
		// 		window.event.returnValue = false;
		// 		window.location.href = "http://127.0.0.1:5500/main.html?phone=" + phone;
		// 	}
		// }

		// 3.
		// $(function(){
		// 	$("#loginBtn").click(function(){
		// 		var phoneNum = $("#phoneNum").val()
		// 		var passNum = $("#passNum").val()
		// 		console.log("这是手机号："+phoneNum);
		// 		console.log("这是密码："+passNum);
		// 		$.ajax({
		// 			async : false,
		// 			// url : "localhost:127.0.0.1:5500/login.html?phone=req.body.phone&password=req.body.password",
		// 			url : "localhost:127.0.0.1:5500/login.html",
		// 			data : $("#loginForm").serialize(),
		// 			type : "post",
		// 			dataType : "text",
		// 			success:function(data){
		// 				if(data === "success"){
		// 					window.location.href = "127.0.0.1:5500/main.html?" + $("phoneNum").val() + ""
		// 				}
		// 			}
		// 		})
		// 		window.location.href = "main.html?value=" + phoneNum
		// 	})
		// })
		
		// $.ajax({
		// 	async : true,
		// 	type : "post",
		// 	url : "http://127.0.0.1:5500/login.html?phone=req.body.phone&password=req.body.password",
		// 	success : function(){
		// 		// 请求成功
		// 		alert("登陆成功。")
		// 	},
		// 	error : function(){
		// 		alert("登陆出错，请重试。")
		// 	}
		// })


	</script>


</body>
</html>