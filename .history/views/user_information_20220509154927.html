<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet/less" href="../public/less/user_information.less">
    <script src="../node_modules/jquery/dist/jquery.min.js"></script>
    <script src="../node_modules/less/dist/less.min.js"></script>
</head>
<body>
    <!-- 个人信息管理界面，展示当前登录的用户的个人信息，包括手机号、密码、收货地址等。 -->
    <div class="container" id="container">
        <div class="mainBox" id="mainBox">
            <ul class="user_main" id="user_main">
                <li class="main_inform_img"><span class="main_img" id="main_img"><img src="../public/img/right_toolBsr_img/user_avatar.png" alt=""></span></li>
                <li class="main_inform">
                    <p class="phone" id="phone">手机号</p>
                    <p class="phoneNum" id="phoneNum"></p>
                </li>
                <li class="changeTab">
                    <input id="edit" class="clickBtn" type="submit" value="编辑">
                    <input id="confirm" class="clickBtn" type="submit" value="确认">
                    <input id="cancle" class="clickBtn" type="buttom" value="取消">
                </li>
                <li class="main_inform">
                    <p class="password" id="password">密码</p>
                    <p class="passwordNum" id="passwordNum">111111</p>
                </li>
                <li class="changeTab">
                    <input id="edit" class="clickBtn" type="submit" value="编辑">
                    <input id="confirm" class="clickBtn" type="submit" value="确认">
                    <input id="cancle" class="clickBtn" type="buttom" value="取消">
                </li>
                <li class="main_inform">
                    <p class="address" id="address">收货地址</p>
                    <p class="addressText" id="addressText">幸福饺子馆</p>
                </li>
                <li class="changeTab">
                    <input id="edit" class="clickBtn" type="submit" value="编辑">
                    <input id="cancle" class="clickBtn" type="hidden" value="取消">
                </li>
            </ul>
        </div>
    </div>
    <script type="text/javascript">

        // 1.用户登录后会进入main界面，此时，从登陆界面拿到手机号和密码发送到个人信息界面，然后进行修改
        $.ajax({
            url : "login.html",
            type : "get",
            data : {
                phone : phone,
                // password : password
            },
            success : function(data){
                $("#phoneNum").html(data[0])

            }
        })


        // 2.jquery实现点击信息后变得按钮，进行对应操作
        $(function(){
            // 1.首先获取到原先展示的信息
            var originPhone = $("#phoneNum").html()
            var originPassword = $("#passwordNum").html()
            var originAddress = $("#addressText").html()
            // 2.手机号的点击按钮事件
            $('#edit').click(function(){
                    // 2.2把原来的文本覆盖，填充原文到value
                    $('#phoneNum').html("<input id='inputs' type='text' name='change==phone' value="+originPhone+">");
                    // 修改信息后，点击保存按钮，将修改后的数据发送到app.js进行更新数据库的操作
                    $('#inputs').click(function(){
                        $.ajax({
                            type:"post",
                            url:"/user_inform",
                            timeout : 3000,
                            data:{
                                phone : $("#inputs").html()
                            },
                            success : function(res){
                                if(res.code == 1){
                                    alert(res.message)
                                    // window.location.href = "/main.html";
                                }else{
                                    alert(res.message)
                                }
                            },
                            error : function(){
                                // console.info("网络出错。")
                                alert("修改失败，请重试。。。")
                            }
                        })
                    })
            });
            // 2.6取消按钮点击事件
            $('#cancle').click(function(){
                // 2.7改变value属性，并把提交改为编辑
                $('#edit').attr('value','编辑')
                // 2.8将原来的文本填充，覆盖
                $('#phoneNum').html(originPhone)
                // 2.9将取消按钮隐藏
                $('#cancle').attr('type','hidden')
            });
        })


        



    </script>
</body>
</html>